<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Dinosaurio en p5.js</title>
  <style>
    html,body { height:100%; margin:0; display:flex; align-items:center; justify-content:center; background:#cfeeff; }
    canvas { box-shadow: 0 8px 24px rgba(0,0,0,0.15); border-radius:6px; }
  </style>
</head>
<body>
  <script src="https://cdn.jsdelivr.net/npm/p5@1.6.0/lib/p5.min.js"></script>
  <script>
    // Variables de animación
    let t = 0;
    let dinoX, dinoY;

    function setup() {
      createCanvas(900, 450);
      dinoX = width / 2;
      dinoY = height * 0.55;
      frameRate(60);
    }

    function draw() {
      background(175, 225, 255); // cielo
      drawGround();

      // animación básica
      t += 0.05;
      let bob = sin(t * 1.2) * 4;                  // sube/baja corporal
      let walkOffset = sin(t * 0.8) * 20;         // pequeño desplazamiento horizontal

      // dibuja el dinosaurio en el centro (con bob y walk)
      drawDino(dinoX + walkOffset, dinoY + bob, 1.0, t);
    }

    function drawGround() {
      noStroke();
      fill(120, 200, 120);
      rect(0, dinoY + 70, width, height - (dinoY + 70));
      // sombreado de tierra
      fill(100, 160, 90, 120);
      rect(0, dinoY + 90, width, height - (dinoY + 90));
    }

    // x, y = posición base del dino (centro del cuerpo)
    // s = escala
    // time = valor para animaciones
    function drawDino(x, y, s, time) {
      push();
      translate(x, y);
      scale(s);
      noStroke();

      // colores
      const green = color(90, 170, 80);
      const belly = color(245, 235, 200);
      const spikeColor = color(200, 90, 70);

      // ---- cola (detrás del cuerpo) ----
      push();
        translate(-80, 10);
        rotate(-0.5 + sin(time * 0.9) * 0.12);
        fill(green);
        ellipse(-60, 0, 140, 46);
      pop();

      // ---- cuerpo ----
      fill(green);
      ellipse(0, 0, 220, 125);   // cuerpo principal

      // barriga
      fill(belly);
      ellipse(-8, 10, 120, 70);

      // ---- cuello + cabeza (encima del cuerpo) ----
      push();
        translate(75, -50);
        rotate(-0.18);
        // cabeza
        fill(green);
        ellipse(0, 0, 92, 68);
        // hocico
        ellipse(18, 6, 44, 28);
        // ojo
        fill(255);
        ellipse(-12, -6, 16, 12);
        fill(0);
        ellipse(-12, -6, 6, 6);
        // boca simple (línea)
        stroke(30,30,30);
        strokeWeight(2);
        noFill();
        arc(30, -10, 36, 20, 0.1, PI / 6);
        noStroke();
      pop();

      // ---- patas (animadas) ----
      let legSwing = sin(time * 3) * 20; // grados

      // pata derecha (adelante)
      push();
        translate(40, 54);
        rotate(radians(20) + radians(legSwing));
        fill(60,120,60);
        rect(-12, 0, 24, 58, 8);
        // pie
        ellipse(0, 60, 34, 18);
      pop();

      // pata izquierda (detrás)
      push();
        translate(-18, 58);
        rotate(radians(-12) - radians(legSwing));
        fill(60,120,60);
        rect(-12, 0, 24, 58, 8);
        ellipse(0, 60, 34, 18);
      pop();

      // ---- púas/dientes en la espalda ----
      fill(spikeColor);
      for (let i = 0; i < 6; i++) {
        let xi = -60 + i * 30;
        let yi = -40 + sin(time * 2 + i * 0.6) * 2; // ligerísimo movimiento
        triangle(xi, yi, xi + 14, yi - 34, xi + 28, yi);
      }

      pop();
    }
  </script>
</body>
</html>
